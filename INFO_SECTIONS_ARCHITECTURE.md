# Унифицированная архитектура информационных блоков

## Обзор

Данная архитектура стандартизирует все информационные блоки в приложении Zoomos v4, обеспечивая консистентный внешний вид, простоту использования и гибкость для различных типов контента.

## Структура архитектуры

### 1. CSS архитектура (`info-sections.css`)

Система основана на блочно-элементной методологии с модификаторами:

```css
.info-section                    /* Базовый блок */
.info-section__title            /* Заголовок */
.info-section__icon             /* Иконка */
.info-section__body             /* Содержимое */
.info-section--description      /* Модификатор типа */
.info-section--compact          /* Модификатор размера */
```

### 2. Thymeleaf фрагменты (`fragments/info-sections.html`)

Набор готовых фрагментов для различных типов информационных блоков.

## Типы информационных блоков

### 1. **Description** - Описания функциональности
- **Цвет**: Синий (#007bff)
- **Иконка**: `fas fa-info-circle`
- **Использование**: Общие описания возможностей

### 2. **Requirements** - Требования к файлам
- **Цвет**: Зеленый (#28a745)
- **Иконка**: `fas fa-file-alt`
- **Использование**: Технические требования

### 3. **Examples** - Примеры и образцы
- **Цвет**: Фиолетовый (#6f42c1)
- **Иконка**: `fas fa-lightbulb`
- **Использование**: Демонстрация работы

### 4. **Instructions** - Пошаговые инструкции
- **Цвет**: Голубой (#17a2b8)
- **Иконка**: `fas fa-list-ol`
- **Использование**: Руководства пользователя

### 5. **Warnings** - Предупреждения
- **Цвет**: Красный (#dc3545)
- **Иконка**: `fas fa-exclamation-triangle`
- **Использование**: Важная информация

## Модификаторы размера

- **Compact** (`--compact`): Уменьшенные отступы для боковых панелей
- **Large** (`--large`): Увеличенные отступы для акцентных блоков
- **Highlighted** (`--highlighted`): Дополнительное выделение

## Использование

### Базовое использование

```html
<!-- Подключение стилей -->
<link th:href="@{/css/info-sections.css}" rel="stylesheet">

<!-- Основной фрагмент -->
<th:block th:replace="~{fragments/info-sections :: description(
    'Заголовок блока',
    'Содержимое блока в HTML',
    'compact',
    true
)}"></th:block>
```

### Специализированные фрагменты

#### Блок "Как это работает"
```html
<th:block th:replace="~{fragments/info-sections :: howItWorks(
    'Как это работает',
    ${stepsList}
)}"></th:block>
```

Где `stepsList` содержит:
```java
List.of(
    Map.of("icon", "fas fa-upload", "title", "Загрузка", "description", "Загрузите файл"),
    Map.of("icon", "fas fa-cogs", "title", "Обработка", "description", "Система обработает данные")
)
```

#### Блок возможностей
```html
<th:block th:replace="~{fragments/info-sections :: features(
    'Возможности',
    ${featuresList},
    'description'
)}"></th:block>
```

#### Требования к файлу
```html
<th:block th:replace="~{fragments/info-sections :: fileRequirements(${requirements})}"></th:block>
```

Где `requirements`:
```java
Map.of(
    "structure", List.of("Первая строка - заголовки", "Обязательная колонка URL"),
    "format", List.of("CSV или Excel", "UTF-8 кодировка"),
    "output", List.of("Результат в том же формате", "Добавляются новые колонки")
)
```

## Примеры внедрения

### 1. Замена в утилите redirect-finder

**Было:**
```html
<div class="card">
    <div class="card-header bg-danger text-white">
        <h5 class="mb-0">
            <i class="fas fa-external-link-alt"></i>
            Поиск финальных ссылок после редиректов
        </h5>
    </div>
    <div class="card-body">
        <p>Утилита следует по HTTP редиректам...</p>
    </div>
</div>
```

**Стало:**
```html
<th:block th:replace="~{fragments/info-sections :: description(
    'Поиск финальных ссылок после редиректов',
    'Утилита следует по HTTP редиректам и определяет финальные URL с защитой от антиботных систем.',
    null,
    true
)}"></th:block>
```

### 2. Замена требований к файлу

**Было:**
```html
<div class="feature-card">
    <h6>
        <i class="fas fa-info-circle text-info"></i>
        Требования к файлу
    </h6>
    <ul class="mb-0">
        <li>Файл должен содержать колонку с URL</li>
        <li>Максимальный размер файла: 1200MB</li>
    </ul>
</div>
```

**Стало:**
```html
<th:block th:replace="~{fragments/info-sections :: requirements(
    'Требования к файлу',
    '<ul class=\"list-with-icons\"><li>Файл должен содержать колонку с URL</li><li>Максимальный размер файла: 1200MB</li></ul>',
    'compact',
    false
)}"></th:block>
```

### 3. Процесс работы

**Было:**
```html
<div class="row">
    <div class="col-md-3">
        <div class="process-icon">
            <i class="fas fa-upload"></i>
        </div>
        <h6>1. Загрузка</h6>
        <p>Загрузите файл с URL</p>
    </div>
    <!-- ... остальные шаги -->
</div>
```

**Стало:**
```html
<th:block th:replace="~{fragments/info-sections :: howItWorks(
    'Как это работает',
    ${T(java.util.List).of(
        T(java.util.Map).of('icon', 'fas fa-upload', 'title', 'Загрузка', 'description', 'Загрузите файл с URL'),
        T(java.util.Map).of('icon', 'fas fa-cogs', 'title', 'Настройка', 'description', 'Выберите колонки'),
        T(java.util.Map).of('icon', 'fas fa-route', 'title', 'Обработка', 'description', 'Следование по редиректам'),
        T(java.util.Map).of('icon', 'fas fa-download', 'title', 'Результат', 'description', 'Файл с финальными URL')
    )}
)}"></th:block>
```

## Адаптивность и доступность

Архитектура автоматически обеспечивает:

- **Мобильную адаптивность**: Автоматическое изменение макета на мобильных устройствах
- **Доступность**: ARIA-метки, фокус, поддержка screen readers
- **Темную тему**: Автоматическая поддержка темной темы браузера
- **Печать**: Оптимизация для печати

## Внедрение в существующие шаблоны

### Шаг 1: Подключение стилей
Добавьте в секцию `styles`:
```html
<th:block th:fragment="styles">
    <link th:href="@{/css/info-sections.css}" rel="stylesheet">
    <!-- другие стили -->
</th:block>
```

### Шаг 2: Замена информационных блоков
Найдите существующие блоки с классами:
- `.card` с информационным содержимым
- `.feature-card`
- `.alert` с инструкциями
- Пользовательские информационные блоки

### Шаг 3: Применение фрагментов
Замените их соответствующими фрагментами из `fragments/info-sections.html`.

## Преимущества новой архитектуры

1. **Консистентность**: Единый внешний вид во всех шаблонах
2. **Простота**: Легкое добавление новых информационных блоков
3. **Поддержка**: Централизованные стили облегчают обновления
4. **Гибкость**: Модификаторы для разных контекстов
5. **Производительность**: Оптимизированные CSS и HTML
6. **Доступность**: Встроенная поддержка accessibility стандартов

## Планы развития

- Добавление анимаций для улучшения UX
- Интеграция с системой тем приложения
- Расширение набора специализированных фрагментов
- Добавление интерактивных элементов (сворачивание блоков)

## Совместимость

Архитектура полностью совместима с:
- Bootstrap 5.3.0
- Существующими стилями приложения
- Thymeleaf фрагментами
- Всеми современными браузерами