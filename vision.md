# Техническое видение: Фильтрация страницы статистики

## 1. Технологии

### Frontend
- **JavaScript (ES6+)** - чистый JavaScript без фреймворков
- **Bootstrap 5** - существующие стили для кнопок и UI компонентов
- **HTML5 data-атрибуты** - для маркировки строк таблицы

### Хранение состояния
- **sessionStorage** - сохранение выбранного фильтра между переключениями вкладок

### Принцип
Никаких новых зависимостей. Используем только то, что уже есть в проекте.

## 2. Принципы разработки

### Основные принципы
1. **KISS (Keep It Simple, Stupid)** - максимально простое решение без лишних абстракций
2. **Инкрементальная разработка** - сначала базовая фильтрация, затем улучшения при необходимости
3. **Нулевая зависимость** - не добавляем новые библиотеки и фреймворки
4. **Прогрессивное улучшение** - таблица остается функциональной даже без JavaScript

### Практические правила
- Один JavaScript файл для всей логики фильтрации
- Минимальные изменения в существующем коде
- Использование существующих CSS классов Bootstrap
- Тестирование непосредственно в браузере без написания unit-тестов

## 3. Структура проекта

### Файлы для изменения
```
src/main/resources/
├── templates/statistics/
│   └── results.html          # Добавляем блок с кнопками фильтрации
└── static/js/
    └── statistics-filter.js  # Новый файл с логикой фильтрации
```

### Что изменяем
1. **results.html** - добавление UI компонента с кнопками фильтрации
2. **statistics-filter.js** - вся клиентская логика в одном месте

### Что НЕ трогаем
- Backend код (контроллеры, сервисы)
- База данных
- Существующая бизнес-логика
- Другие страницы приложения

## 4. Архитектура

### Компоненты решения

#### UI слой (HTML)
- Группа кнопок Bootstrap в верхней части страницы
- Data-атрибуты на строках таблицы: `data-row-type="warning"` или `data-row-type="critical"`
- Визуальная индикация активного фильтра

#### Логика фильтрации (JavaScript)
- **Инициализация**: автоматическая при DOMContentLoaded
- **Обработчики событий**: клики на кнопки фильтрации
- **Функция фильтрации**: скрытие/показ строк по data-атрибутам
- **Персистентность**: сохранение состояния в sessionStorage

### Поток данных
```
Пользователь кликает на кнопку фильтра
    ↓
Сохранение выбора в sessionStorage
    ↓
Применение фильтра к строкам таблицы
    ↓
Обновление счетчиков видимых строк
    ↓
Визуальная индикация активного фильтра
```

### Интеграция
- Используем существующие CSS классы `.table-warning` и `.table-danger`
- Встраиваемся в существующую структуру без изменения backend
- Сохраняем работоспособность всех существующих функций