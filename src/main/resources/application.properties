# =======================================================
# ZOOMOS V4 - Основные настройки приложения
# =======================================================

# Активный профиль (verbose, dev, prod, silent)
spring.profiles.active=silent

# DevTools полностью удален из зависимостей

# Debug логирование для диагностики бинов (отключено)
# debug=true
# logging.level.org.springframework.beans=DEBUG
# logging.level.org.springframework.context=DEBUG

# PostgreSQL - базовые настройки
spring.datasource.url=jdbc:postgresql://127.0.0.1:5432/zoomos_v4
spring.datasource.username=postgres
spring.datasource.password=root
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate - общие настройки
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.hbm2ddl.auto=none
spring.jpa.properties.hibernate.schema_validation=false

# =======================================================
# БИЗНЕС-НАСТРОЙКИ ПРИЛОЖЕНИЯ
# =======================================================

# File Management - управление файлами
file.management.archive.enabled=true
file.management.duplicate.scan.enabled=true
file.management.archive.max.size.gb=5
file.management.archive.old-files.days=30
file.management.cleanup.schedule.enabled=true

# Database Maintenance - обслуживание БД
database.maintenance.cleanup.old-data.days=120
database.maintenance.performance.slow-query-threshold=1000
database.maintenance.integrity.check.enabled=true
database.maintenance.auto-cleanup.enabled=true

# Dashboard - дашборд и мониторинг
dashboard.auto-refresh.enabled=true
dashboard.auto-refresh.interval=30000
dashboard.stats.cache-duration=10000

# Flyway - миграции БД
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=false
spring.flyway.locations=classpath:db/migration
spring.flyway.clean-disabled=true

# Import - настройки импорта файлов
import.async.core-pool-size=1
import.async.max-pool-size=2
import.async.queue-capacity=50
import.async.thread-name-prefix=ImportExecutor-
import.batch-size=500
import.max-memory-percentage=60
import.file-analysis.sample-rows=100
import.timeout-minutes=60

# Export - настройки экспорта файлов
export.async.threshold-rows=10000
export.batch-size=1000
export.xlsx.max-rows=1048576
export.csv.default-delimiter=;
export.csv.default-encoding=UTF-8
export.csv.default-quote-char="
export.temp.dir=data/temp/exports
export.result.dir=data/upload/exports

# Export async executor
export.async.core-pool-size=2
export.async.max-pool-size=4
export.async.queue-capacity=100
export.async.thread-name-prefix=ExportExecutor-

# =======================================================
# ФАЙЛОВАЯ СИСТЕМА И ЗАГРУЗКИ
# =======================================================

# Директории приложения
application.upload.dir=data/upload
application.export.dir=data/upload/exports
application.import.dir=data/upload/imports
application.temp.dir=data/temp

# Ограничения загружаемых файлов
spring.servlet.multipart.max-file-size=1200MB
spring.servlet.multipart.max-request-size=1200MB

# System Health - мониторинг состояния системы
system.health.cpu.warning-threshold=80.0
system.health.memory.warning-threshold=85.0
system.health.disk.warning-threshold=90.0
system.health.database.connection-timeout=5000
system.health.performance.monitoring.enabled=true
system.health.diagnostics.report.enabled=true

# =======================================================
# СИСТЕМА АВТОМАТИЗАЦИИ ОБСЛУЖИВАНИЯ
# =======================================================

# Включение/выключение планировщика обслуживания (отключен по умолчанию)
maintenance.scheduler.enabled=false

# Расписания выполнения операций (cron expressions)
# Ежедневное архивирование старых файлов в 02:00
maintenance.scheduler.file-archive.cron=0 0 2 * * *

# Еженедельная очистка БД каждое воскресенье в 03:00
maintenance.scheduler.database-cleanup.cron=0 0 3 * * SUN

# Ежечасная проверка состояния системы
maintenance.scheduler.health-check.cron=0 0 * * * *

# Еженедельный анализ производительности БД каждый понедельник в 01:00  
maintenance.scheduler.performance-analysis.cron=0 0 1 * * MON

# Ежемесячное полное обслуживание первого числа каждого месяца в 04:00
maintenance.scheduler.full-maintenance.cron=0 0 4 1 * *

# Настройки уведомлений
maintenance.notifications.enabled=true
maintenance.notifications.websocket.enabled=true

# =======================================================
# СЕРВЕР И ПОРТЫ
# =======================================================
server.port=8081