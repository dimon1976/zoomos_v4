# =======================================================
# ПРОФИЛЬ ПРОДАКШЕНА (prod)
# =======================================================

# JPA/Hibernate - оптимизация для продакшена
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.hibernate.ddl-auto=validate

# Thymeleaf - включение кэширования для производительности
spring.thymeleaf.cache=true

# =======================================================
# ЛОГИРОВАНИЕ ДЛЯ ПРОДАКШЕНА
# =======================================================

# Минимальное логирование для производительности
logging.level.org.springframework=WARN
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR

# Логирование приложения - только ошибки и важная информация
logging.level.com.java=DEBUG
logging.level.com.java.service.imports=INFO
logging.level.com.java.service.exports=INFO
logging.level.com.java.service.statistics=INFO
logging.level.com.java.controller=WARN

# Отключение отладки стратегий в продакшене
logging.level.com.java.service.exports.strategies=INFO

# Логирование в файл для продакшена
logging.file.name=logs/zoomos-v4.log
logging.file.max-size=100MB
logging.file.max-history=30

# =======================================================
# ОПТИМИЗАЦИЯ ПРОДАКШЕНА
# =======================================================

# Максимальная производительность дашборда
dashboard.auto-refresh.interval=60000
dashboard.stats.cache-duration=30000

# Оптимальные размеры батчей для продакшена
import.batch-size=1000
export.batch-size=2000

# Полное использование ресурсов
import.async.max-pool-size=4
export.async.max-pool-size=8
import.max-memory-percentage=80

# Flyway - строгие настройки для продакшена
spring.flyway.clean-disabled=true
spring.flyway.clean-on-validation-error=false
spring.flyway.validate-on-migrate=true

# =======================================================
# БЕЗОПАСНОСТЬ И МОНИТОРИНГ
# =======================================================

# Актуатор для мониторинга (если используется)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never

# Таймауты для продакшена
import.timeout-minutes=120
server.servlet.session.timeout=1800s

# =======================================================
# АВТОМАТИЗАЦИЯ ОБСЛУЖИВАНИЯ - ПРОДАКШН
# =======================================================

# Активация планировщика в продакшене
maintenance.scheduler.enabled=true

# Продакшн расписания - оптимизированы для минимального влияния на производительность
# Архивирование файлов каждый день в 03:00 (минимальная нагрузка)
maintenance.scheduler.file-archive.cron=0 0 3 * * *

# Очистка БД каждое воскресенье в 04:00 
maintenance.scheduler.database-cleanup.cron=0 0 4 * * SUN

# Проверка системы каждые 2 часа (менее частая в проде)
maintenance.scheduler.health-check.cron=0 0 */2 * * *

# Анализ производительности каждый понедельник в 02:00
maintenance.scheduler.performance-analysis.cron=0 0 2 * * MON

# Полное обслуживание первого числа каждого месяца в 05:00
maintenance.scheduler.full-maintenance.cron=0 0 5 1 * *

# Логирование обслуживания
logging.level.com.java.service.MaintenanceSchedulerService=INFO
logging.level.com.java.service.NotificationService=INFO

# Уведомления включены для критических событий
maintenance.notifications.enabled=true
maintenance.notifications.websocket.enabled=true

# Оптимизация БД для обслуживания
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=20000

# Hibernate batch processing
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true