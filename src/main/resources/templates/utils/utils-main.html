<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" 
      th:replace="~{layout/main :: html(
        title='Утилиты',
        content=~{::content},
        scripts=~{::scripts},
        styles=~{::styles},
        pageTitle='Утилиты',
        pageActions=~{::pageActions}
      )}">
<head>
    <title>Утилиты</title>
</head>

<th:block th:fragment="styles">
    <style>
        .utility-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .utility-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .status-ready { background-color: #28a745; }
        .status-development { background-color: #ffc107; }
        .status-disabled { background-color: #6c757d; }
        .utility-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</th:block>

<th:block th:fragment="pageActions">
    <div class="d-flex gap-2">
        <button type="button" class="btn btn-outline-primary" onclick="location.reload()">
            <i class="fas fa-sync-alt"></i> Обновить
        </button>
    </div>
</th:block>

<th:block th:fragment="content">
    <div class="container-fluid">
        
        <!-- Описание системы утилит -->
        <div class="row mb-4">
            <div class="col-12">
                <section class="info-section info-section--description">
                    <h3 class="info-section__title">
                        <i class="info-section__icon fas fa-info-circle"></i>
                        <span>Система утилит для обработки файлов</span>
                    </h3>
                    <div class="info-section__body">
                        <div class="row">
                            <div class="col-md-8">
                                <p class="mb-2">Набор специализированных инструментов для работы с данными без сохранения в базу данных.</p>
                                <p class="mb-3">Все утилиты работают по принципу: <strong>загрузил файл → настроил параметры → получил результат</strong>.</p>
                                <div class="d-flex flex-wrap gap-3">
                                    <div class="text-center">
                                        <i class="fas fa-file-alt fa-2x text-primary mb-2"></i>
                                        <div><small>Поддержка CSV/Excel</small></div>
                                    </div>
                                    <div class="text-center">
                                        <i class="fas fa-cog fa-2x text-success mb-2"></i>
                                        <div><small>Гибкие настройки</small></div>
                                    </div>
                                    <div class="text-center">
                                        <i class="fas fa-download fa-2x text-info mb-2"></i>
                                        <div><small>Мгновенный результат</small></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="bg-light p-3 rounded">
                                    <h6 class="text-muted mb-3">Возможности системы:</h6>
                                    <ul class="list-with-icons mb-0">
                                        <li><i class="fas fa-upload text-success"></i> Загрузка до 1200MB</li>
                                        <li><i class="fas fa-clock text-warning"></i> Обработка без сохранения</li>
                                        <li><i class="fas fa-download text-primary"></i> Результат сразу на скачивание</li>
                                        <li><i class="fas fa-shield-alt text-info"></i> Локальная обработка</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Список утилит -->
        <div class="row">
            <div th:each="utility : ${utilities}" class="col-md-6 col-lg-3 mb-4">
                <div class="card utility-card h-100 d-flex flex-column"
                     th:classappend="${utility.status == 'disabled'} ? 'bg-light' : ''">
                    <div class="card-body text-center flex-grow-1 d-flex flex-column">
                        <div class="utility-icon mb-3"
                             th:classappend="${utility.status == 'ready'} ? 'text-success' : (${utility.status == 'development'} ? 'text-warning' : 'text-muted')">
                            <i th:class="${utility.icon}"></i>
                        </div>
                        <h5 class="card-title mb-3" th:text="${utility.title}">Название утилиты</h5>
                        <p class="card-text flex-grow-1 mb-4" th:text="${utility.description}">Описание утилиты</p>
                        <div class="mt-auto">
                            <div th:switch="${utility.status}">
                                <a th:case="ready"
                                   th:href="${utility.url}"
                                   class="btn btn-success btn-lg w-100">
                                    <i class="fas fa-arrow-right"></i> Использовать
                                </a>
                                <button th:case="development"
                                        type="button"
                                        class="btn btn-warning btn-lg w-100"
                                        disabled>
                                    <i class="fas fa-hammer"></i> В разработке
                                </button>
                                <button th:case="disabled"
                                        type="button"
                                        class="btn btn-secondary btn-lg w-100"
                                        disabled>
                                    <i class="fas fa-ban"></i> Недоступно
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-light text-center">
                        <small class="text-muted">
                            <span class="status-indicator"
                                  th:classappend="'status-' + ${utility.status}"></span>
                            <span th:switch="${utility.status}">
                                <span th:case="ready">Готово к использованию</span>
                                <span th:case="development">В разработке</span>
                                <span th:case="disabled">Отключено</span>
                            </span>
                        </small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Инструкция по использованию -->
        <div class="row mt-4">
            <div class="col-12">
                <section class="info-section info-section--instructions">
                    <h3 class="info-section__title">
                        <i class="info-section__icon fas fa-list-ol"></i>
                        <span>Как использовать утилиты</span>
                    </h3>
                    <div class="info-section__body">
                        <div class="info-section__process-steps">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="info-section__process-step text-center mb-3">
                                        <div class="info-section__process-icon">
                                            <i class="fas fa-mouse-pointer"></i>
                                        </div>
                                        <div class="info-section__process-title">Выбор утилиты</div>
                                        <div class="info-section__process-description">Нажмите на нужную утилиту из списка выше</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="info-section__process-step text-center mb-3">
                                        <div class="info-section__process-icon">
                                            <i class="fas fa-upload"></i>
                                        </div>
                                        <div class="info-section__process-title">Загрузка файла</div>
                                        <div class="info-section__process-description">Загрузите файл для обработки (Excel, CSV)</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="info-section__process-step text-center mb-3">
                                        <div class="info-section__process-icon">
                                            <i class="fas fa-cogs"></i>
                                        </div>
                                        <div class="info-section__process-title">Настройка параметров</div>
                                        <div class="info-section__process-description">Выберите нужные колонки и параметры обработки</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="info-section__process-step text-center mb-3">
                                        <div class="info-section__process-icon">
                                            <i class="fas fa-download"></i>
                                        </div>
                                        <div class="info-section__process-title">Получение результата</div>
                                        <div class="info-section__process-description">Скачайте готовый файл с результатами</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 p-3 bg-light rounded text-center">
                            <i class="fas fa-shield-alt text-success"></i>
                            <strong>Безопасность:</strong> Все файлы обрабатываются локально и не сохраняются на сервере после завершения операции
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</th:block>

<th:block th:fragment="scripts">
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Система утилит загружена');
    // Добавить сюда дополнительную логику при необходимости
});
</script>
</th:block>
</html>